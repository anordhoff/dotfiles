# --------------------------------------
# basic configuration
# --------------------------------------

# preferred terminal emulator
set $term kitty

# preferred application launcher
set $menu bemenu-run -i --line-height 24 --ch 16 --fn "SF Pro Display 11" -p '>' \
	--tf "#83a598" --ff "#ebdbb2" --cf "#a89984" --nf "#ebdbb2" --af "#ebdbb2" \
	--hf "#83a598" --sf "#ebdbb2" --tb "#000000" --fb "#000000" --cb "#000000" \
	--nb "#000000" --ab "#000000" --hb "#000000" --sb "#000000"

# wallpaper
set $wallpaper $HOME/Pictures/fedora-gruvbox.png

# font
font San Francisco Display Medium 11

# disable focus wrapping
focus_wrapping yes

# disable mouse focus
focus_follows_mouse no

# remove title bars
default_border pixel 1
smart_borders on


# --------------------------------------
# input
# --------------------------------------

# TODO: reduce tapping sensitivity
input 1739:31251:SYNA2393:00_06CB:7A13_Touchpad {
	# tap enabled
	dwt enabled
	click_method clickfinger
	natural_scroll enabled
}

input 4661:22137:kmonad_output {
	repeat_delay 200
	repeat_rate 35
}

input 51984:16982:Keebio_Keebio_Iris_Rev._4 {
	repeat_delay 200
	repeat_rate 35
}

input 22861:24653:YMDK_YD60MQ {
	repeat_delay 200
	repeat_rate 35
}

# TODO: mouse is still too fast
input 1739:31251:SYNA2393:00_06CB:7A13_Mouse {
	accel_profile flat
	pointer_accel -1.0
}

# volume (prevent pulseaudio from increasing volume beyond 100%)
bindsym --locked XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec [ $(pactl get-sink-volume @DEFAULT_SINK@ | grep 'Volume:' | sed 's/.*\ \([0-9]*\)%\ .*/\1/') -lt 100 ] && pactl set-sink-volume @DEFAULT_SINK@ +5%

# media
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioPlay exec playerctl play-pause

# backlight
bindsym XF86MonBrightnessUp exec light -A 5
bindsym XF86MonBrightnessDown exec light -U 5

# capture the specified area to clipboard
bindsym Print exec grim -g "$(slurp)" - | wl-copy

# capture the focused monitor to clipboard
bindsym Ctrl+Print exec grim -o $(swaymsg -t get_outputs | jq -r ".[] | select(.focused) | .name") - | wl-copy


# --------------------------------------
# output
# --------------------------------------

output eDP-1 {
	position 0 520
	resolution 1920x1080
	background $wallpaper fill
}

output DP-1 {
	position 1920 0
	resolution 3840x1600
	background $wallpaper center
}


# --------------------------------------
# keybindings
# --------------------------------------

# modifier
set $meh Shift+Ctrl+Alt
set $hyper Shift+Ctrl+Alt+Mod4

# movement keys
set $left  n
set $down  e
set $up    i
set $right o
set $prev  u
set $next  y

# start terminal
bindsym $meh+return exec $term

# kill focused window
bindsym $meh+q kill

# start launcher
bindsym $meh+escape exec $menu

# enter fullscreen mode for the focused container
bindsym $meh+z fullscreen

# change container layout
bindsym $meh+b layout tabbed
bindsym $meh+g layout toggle split

# define names for the default workspaces
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

# define names for adjacent workspaces
set $wsleft  "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 ))";
set $wsright "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 ))";

# change focus
bindsym $meh+$left  focus left
bindsym $meh+$down  focus down
bindsym $meh+$up    focus up
bindsym $meh+$right focus right

# move focused window
bindsym $hyper+$left  move left
bindsym $hyper+$down  move down
bindsym $hyper+$up    move up
bindsym $hyper+$right move right

# switch to workspace
bindsym $meh+x workspace $ws1
bindsym $meh+c workspace $ws2
bindsym $meh+d workspace $ws3
bindsym $meh+r workspace $ws4
bindsym $meh+s workspace $ws5
bindsym $meh+t workspace $ws6
bindsym $meh+w workspace $ws7
bindsym $meh+f workspace $ws8
bindsym $meh+p workspace $ws9
bindsym $meh+a workspace $ws10

# switch between adjacent workspaces
bindsym $meh+$prev workspace prev
bindsym $meh+$next workspace next

# move focused container to workspace
bindsym $hyper+x move container to workspace $ws1
bindsym $hyper+c move container to workspace $ws2
bindsym $hyper+d move container to workspace $ws3
bindsym $hyper+r move container to workspace $ws4
bindsym $hyper+s move container to workspace $ws5
bindsym $hyper+t move container to workspace $ws6
bindsym $hyper+w move container to workspace $ws7
bindsym $hyper+f move container to workspace $ws8
bindsym $hyper+p move container to workspace $ws9
bindsym $hyper+a move container to workspace $ws10

# move focuse container to adjacent workspace
bindsym $hyper+$prev exec swaymsg move container to workspace $wsleft
bindsym $hyper+$next exec swaymsg move container to workspace $wsright

# move focus to adjacent monitor
bindsym $meh+minus focus output left
bindsym $meh+equal focus output right

# move window to adjacent monitor
# NOTE: macOS reserves `hyper + ,` and `hyper + .` for sysdiagnose. Remapped
# comma, period to minux, equal
bindsym $hyper+minus move container output left
bindsym $hyper+equal move container output right

# resize window
bindsym $meh+h resize shrink width  100px
bindsym $meh+j resize grow   height 100px
bindsym $meh+k resize shrink height 100px
bindsym $meh+l resize grow   width  100px
bindsym $hyper+h resize shrink width  10px
bindsym $hyper+j resize grow   height 10px
bindsym $hyper+k resize shrink height 10px
bindsym $hyper+l resize grow   width  10px

# lock computer
bindsym $meh+slash exec "swaylock -f -i $wallpaper"

# exit sway (logs you out of your Wayland session)
bindsym $hyper+slash exec swaynag -t warning -m "You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session." -b "Yes, exit sway" "swaymsg exit"

# reload the configuration file
bindsym $hyper+escape reload


# --------------------------------------
# style
# --------------------------------------

# class                 border  backgr. text    indica. ch_bor.
client.focused          #83a598 #000000 #ebdbb2 #ffffff #d3869b
client.focused_inactive #32302f #000000 #ebdbb2 #ffffff #32302f
client.unfocused        #32302f #000000 #ebdbb2 #ffffff #32302f
client.urgent           #fb4934 #000000 #ebdbb2 #ffffff #fb4934
# client.focused          #505050 #505050 #cfd6e6 #808080 #606060
# client.focused_inactive #303030 #303030 #cfd6e6 #404040 #303030
# client.unfocused        #303030 #303030 #cfd6e6 #404040 #303030
# client.urgent           #bf5858 #303030 #cfd6e6 #bf5858 #bf5858

#       ┌──────────────┬─────────┬────────────┬─────────┬───────────┬──────────────┐
#       │    class     │ border  │ background │ text    │ indicator │ child_border │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │background    │ n/a     │ #ffffff    │ n/a     │ n/a       │ n/a          │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │focused       │ #4c7899 │ #285577    │ #ffffff │ #2e9ef4   │ #285577      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │focused_inac‐ │ #333333 │ #5f676a    │ #ffffff │ #484e50   │ #5f676a      │
#       │tive          │         │            │         │           │              │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │fo‐           │ #333333 │ #5f676a    │ #ffffff │ n/a       │ n/a          │
#       │cused_tab_ti‐ │         │            │         │           │              │
#       │tle           │         │            │         │           │              │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │unfocused     │ #333333 │ #222222    │ #888888 │ #292d2e   │ #222222      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │urgent        │ #2f343a │ #900000    │ #ffffff │ #900000   │ #900000      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │placeholder   │ #000000 │ #0c0c0c    │ #ffffff │ #000000   │ #0c0c0c      │
#       └──────────────┴─────────┴────────────┴─────────┴───────────┴──────────────┘


# --------------------------------------
# source
# --------------------------------------

include /etc/sway/config.d/*
exec "systemctl --user import-environment; systemctl --user start sway-session.target"
