# --------------------------------------
# basic configuration
# --------------------------------------

# preferred terminal emulator
set $term kitty

# preferred application launcher
set $menu bemenu-run -i --line-height 24 --ch 16 --fn "SF Pro Display 11" -p '>' \
	--tf "#83a598" --ff "#ebdbb2" --cf "#a89984" --nf "#ebdbb2" --af "#ebdbb2" \
	--hf "#83a598" --sf "#ebdbb2" --tb "#000000" --fb "#000000" --cb "#000000" \
	--nb "#000000" --ab "#000000" --hb "#000000" --sb "#000000"

# wallpaper
set $wallpaper $HOME/Pictures/fedora-gruvbox.png

# font
font San Francisco Display Medium 11

# disable focus wrapping
focus_wrapping yes

# disable mouse focus
focus_follows_mouse no

# remove title bars
default_border pixel 1
smart_borders on


# --------------------------------------
# input
# --------------------------------------

# TODO: reduce tapping sensitivity
input 1739:31251:SYNA2393:00_06CB:7A13_Touchpad {
	# tap enabled
	dwt enabled
	click_method clickfinger
	natural_scroll enabled
}

input 4661:22137:kmonad_output {
	repeat_delay 200
	repeat_rate 35
}

input 51984:16982:Keebio_Keebio_Iris_Rev._4 {
	repeat_delay 200
	repeat_rate 35
}

input 22861:24653:YMDK_YD60MQ {
	repeat_delay 200
	repeat_rate 35
}

# TODO: mouse is still too fast
input 1739:31251:SYNA2393:00_06CB:7A13_Mouse {
	accel_profile flat
	pointer_accel -1.0
}

# volume
# TODO: percent adjusted when using hotkeys is messed up
# bindsym XF86AudioRaiseVolume exec amixer -q set Master 5%+
# bindsym XF86AudioLowerVolume exec amixer -q set Master 5%-
# # bindsym XF86AudioMute exec amixer -q -D pulse set Master toggle
# bindsym XF86AudioMute exec amixer -q set Master toggle

# bindsym XF86AudioRaiseVolume exec amixer -D pulse sset Master 5%+
# bindsym XF86AudioLowerVolume exec amixer -D pulse sset Master 5%-
# # bindsym XF86AudioMute exec amixer -q -D pulse set Master toggle
# bindsym XF86AudioMute exec amixer -q set Master toggle

# volume (prevent pulseaudio from increasing volume beyond 100%)
bindsym --locked XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec [ $(pactl get-sink-volume @DEFAULT_SINK@ | grep 'Volume:' | sed 's/.*\ \([0-9]*\)%\ .*/\1/') -lt 100 ] && pactl set-sink-volume @DEFAULT_SINK@ +5%

# media
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioPlay exec playerctl play-pause

# backlight
bindsym XF86MonBrightnessUp exec light -A 5
bindsym XF86MonBrightnessDown exec light -U 5

# capture the specified area to clipboard
bindsym Print exec grim -g "$(slurp)" - | wl-copy

# capture the focused monitor to clipboard
bindsym Ctrl+Print exec grim -o $(swaymsg -t get_outputs | jq -r ".[] | select(.focused) | .name") - | wl-copy


# --------------------------------------
# output
# --------------------------------------

output eDP-1 {
	position 0 520
	resolution 1920x1080
	background $wallpaper fill
}

output DP-1 {
	position 1920 0
	resolution 3840x1600
	background $wallpaper center
}


# --------------------------------------
# keybindings
# --------------------------------------

# modifier
set $mod Shift+Ctrl+Alt

# movement keys
set $left  n
set $down  e
set $up    i
set $right o
set $prev  u
set $next  y

# start terminal
bindsym $mod+Return exec $term

# kill focused window
bindsym $mod+q kill

# start launcher
bindsym $mod+Escape exec $menu

# change focus
bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right

# move focused window
bindsym $mod+Mod4+$left  move left
bindsym $mod+Mod4+$down  move down
bindsym $mod+Mod4+$up    move up
bindsym $mod+Mod4+$right move right

# enter fullscreen mode for the focused container
bindsym $mod+z fullscreen

# change container layout
bindsym $mod+b layout tabbed
bindsym $mod+g layout toggle split

# define names for the default workspaces
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

# define names for adjacent workspaces
set $wsleft  "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) - 1 ))";
set $wsright "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) + 1 ))";

# switch to workspace
bindsym $mod+x workspace $ws1
bindsym $mod+c workspace $ws2
bindsym $mod+d workspace $ws3
bindsym $mod+r workspace $ws4
bindsym $mod+s workspace $ws5
bindsym $mod+t workspace $ws6
bindsym $mod+w workspace $ws7
bindsym $mod+f workspace $ws8
bindsym $mod+p workspace $ws9
bindsym $mod+a workspace $ws10

# switch between adjacent workspaces
bindsym $mod+$prev workspace prev
bindsym $mod+$next workspace next

# move focused container to workspace
bindsym $mod+Mod4+x move container to workspace $ws1
bindsym $mod+Mod4+c move container to workspace $ws2
bindsym $mod+Mod4+d move container to workspace $ws3
bindsym $mod+Mod4+r move container to workspace $ws4
bindsym $mod+Mod4+s move container to workspace $ws5
bindsym $mod+Mod4+t move container to workspace $ws6
bindsym $mod+Mod4+w move container to workspace $ws7
bindsym $mod+Mod4+f move container to workspace $ws8
bindsym $mod+Mod4+p move container to workspace $ws9
bindsym $mod+Mod4+a move container to workspace $ws10

# move focuse container to adjacent workspace
bindsym $mod+Mod4+$prev exec swaymsg move container to workspace $wsleft
bindsym $mod+Mod4+$next exec swaymsg move container to workspace $wsright

# resize window
bindsym $mod+h resize shrink width  100px
bindsym $mod+j resize grow   height 100px
bindsym $mod+k resize shrink height 100px
bindsym $mod+l resize grow   width  100px
bindsym $mod+Mod4+h resize shrink width  10px
bindsym $mod+Mod4+j resize grow   height 10px
bindsym $mod+Mod4+k resize shrink height 10px
bindsym $mod+Mod4+l resize grow   width  10px

# TODO: switch between multiple monitors with , and .

# lock computer
bindsym $mod+Slash exec "swaylock -f -i $wallpaper"

# exit sway (logs you out of your Wayland session)
bindsym $mod+Mod4+Slash exec swaynag -t warning -m "You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session." -b "Yes, exit sway" "swaymsg exit"

# reload the configuration file
bindsym $mod+Mod4+Escape reload


# --------------------------------------
# style
# --------------------------------------

# class                 border  backgr. text    indica. ch_bor.
client.focused          #83a598 #000000 #ebdbb2 #ffffff #d3869b
client.focused_inactive #32302f #000000 #ebdbb2 #ffffff #32302f
client.unfocused        #32302f #000000 #ebdbb2 #ffffff #32302f
client.urgent           #fb4934 #000000 #ebdbb2 #ffffff #fb4934
# client.focused          #505050 #505050 #cfd6e6 #808080 #606060
# client.focused_inactive #303030 #303030 #cfd6e6 #404040 #303030
# client.unfocused        #303030 #303030 #cfd6e6 #404040 #303030
# client.urgent           #bf5858 #303030 #cfd6e6 #bf5858 #bf5858

#       ┌──────────────┬─────────┬────────────┬─────────┬───────────┬──────────────┐
#       │    class     │ border  │ background │ text    │ indicator │ child_border │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │background    │ n/a     │ #ffffff    │ n/a     │ n/a       │ n/a          │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │focused       │ #4c7899 │ #285577    │ #ffffff │ #2e9ef4   │ #285577      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │focused_inac‐ │ #333333 │ #5f676a    │ #ffffff │ #484e50   │ #5f676a      │
#       │tive          │         │            │         │           │              │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │fo‐           │ #333333 │ #5f676a    │ #ffffff │ n/a       │ n/a          │
#       │cused_tab_ti‐ │         │            │         │           │              │
#       │tle           │         │            │         │           │              │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │unfocused     │ #333333 │ #222222    │ #888888 │ #292d2e   │ #222222      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │urgent        │ #2f343a │ #900000    │ #ffffff │ #900000   │ #900000      │
#       ├──────────────┼─────────┼────────────┼─────────┼───────────┼──────────────┤
#       │placeholder   │ #000000 │ #0c0c0c    │ #ffffff │ #000000   │ #0c0c0c      │
#       └──────────────┴─────────┴────────────┴─────────┴───────────┴──────────────┘


# --------------------------------------
# source
# --------------------------------------

include /etc/sway/config.d/*
exec "systemctl --user import-environment; systemctl --user start sway-session.target"
